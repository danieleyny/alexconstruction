(self.webpackJsonp=self.webpackJsonp||[]).push([["AppBridgeLeaveConfirmation"],{"./app/components/AppBridgeHost/LeaveConfirmation/index.ts":function(e,o,t){"use strict";t.r(o),t.d(o,"default",(function(){return d}));var n=t("./node_modules/react/index.js"),i=t.n(n),a=t("./node_modules/@shopify/app-bridge-host/index.js"),r=t("./node_modules/@shopify/app-bridge-host/store/reducers/leaveConfirmation.js"),s=t("./node_modules/@shopify/react-compose/build/esnext/index.esnext"),l=t("./app/components/LeaveConfirmation/LeaveConfirmation.tsx");var d=Object(s.a)(Object(a.withFeature)(r.feature))((function({actions:e,store:o}){const t=Object(n.useCallback)((()=>{e.confirm()}),[e]);return o?i.a.createElement(l.a,{onConfirm:t}):null}))},"./app/components/LeaveConfirmation/LeaveConfirmation.tsx":function(e,o,t){"use strict";var n,i=t("./node_modules/react/index.js"),a=t.n(i),r=t("./node_modules/@shopify/polaris/dist/esnext/components/EventListener/EventListener.tsx.esnext"),s=t("./node_modules/@shopify/polaris/dist/esnext/components/Modal/Modal.tsx.esnext"),l=t("./node_modules/@shopify/react-i18n/build/esnext/decorator.esnext"),d=t("./node_modules/react-router/esm/react-router.js"),c=t("./packages/@web-utilities/decorators/index.ts"),p=t("./node_modules/@shopify/react-compose/build/esnext/index.esnext");function u(e,o,t,n,i){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=t.slice().reverse().reduce((function(t,n){return n(e,o,t)||t}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,o,a),a=null),a}let m=(u((n=class extends a.a.PureComponent{constructor(...e){super(...e),this.state={open:!1}}componentDidMount(){this.enableLeaveHook()}componentWillUnmount(){this.disableLeaveHook()}render(){const{i18n:e,title:o,description:t}=this.props,{open:n}=this.state,i=null==o?e.translate("LeaveConfirmation.title"):o,l=null==t?e.translate("LeaveConfirmation.content"):t;return a.a.createElement(a.a.Fragment,null,a.a.createElement(r.a,{event:"beforeunload",handler:this.beforeUnload}),a.a.createElement(s.a,{title:i,open:n,secondaryActions:[{content:e.translate("Common.cancel"),onAction:this.handleClose},{content:e.translate("LeaveConfirmation.confirmLabel"),onAction:this.handleConfirm,destructive:!0}],onClose:this.handleClose},a.a.createElement(s.a.Section,null,l)))}disableLeaveHook(){this.removeLeaveHook&&(this.removeLeaveHook(),this.removeLeaveHook=null)}enableLeaveHook(){const{history:e}=this.props;this.removeLeaveHook&&this.removeLeaveHook(),this.removeLeaveHook=e.block(this.handleRouteLeave)}beforeUnload(e){return e.returnValue=!0,!0}handleRouteLeave(e){const{location:o,onModalOpen:t}=this.props;if(!e||e.pathname!==o.pathname)return this.setState({nextLocation:e,open:!0}),null!=t&&t(),!1}handleClose(){this.setState({open:!1})}handleConfirm(){const{nextLocation:e}=this.state,{history:o,onConfirm:t}=this.props;e&&(t&&t(),this.disableLeaveHook(),o.push(e))}}).prototype,"beforeUnload",[c.a],Object.getOwnPropertyDescriptor(n.prototype,"beforeUnload"),n.prototype),u(n.prototype,"handleRouteLeave",[c.a],Object.getOwnPropertyDescriptor(n.prototype,"handleRouteLeave"),n.prototype),u(n.prototype,"handleClose",[c.a],Object.getOwnPropertyDescriptor(n.prototype,"handleClose"),n.prototype),u(n.prototype,"handleConfirm",[c.a],Object.getOwnPropertyDescriptor(n.prototype,"handleConfirm"),n.prototype),n);o.a=Object(p.a)(d.l,Object(l.a)())(m)},"./node_modules/@shopify/app-bridge-host/store/reducers/leaveConfirmation.js":function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.feature=o.reducer=void 0;var n=t("./node_modules/@shopify/app-bridge/actions/index.js"),i=t("./node_modules/@shopify/app-bridge/validate/actions/leaveConfirmation.js");function a(e,o){void 0===e&&(e=null);var t=o;if(i.validateAction(t))return e;switch(o.type){case n.LeaveConfirmation.Action.ENABLE:return{id:o.payload.id};case n.LeaveConfirmation.Action.DISABLE:return null;default:return e}}o.reducer=a,o.feature={actions:{enable:n.LeaveConfirmation.enable,disable:n.LeaveConfirmation.disable,confirm:n.LeaveConfirmation.confirm},key:"leaveConfirmation",initialState:null,reducer:a}},"./node_modules/@shopify/app-bridge/validate/actions/leaveConfirmation.js":function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.Action=o.validateAction=void 0;var n=t("./node_modules/@shopify/app-bridge/actions/LeaveConfirmation/index.js");Object.defineProperty(o,"Action",{enumerable:!0,get:function(){return n.Action}});var i=t("./node_modules/@shopify/app-bridge/validate/type-validate.js"),a=t("./node_modules/@shopify/app-bridge/validate/utils.js");o.validateAction=function(e){var o=a.createActionValidator(n.Action);return i.validate(e,o)}}}]);